import{i as T,c as k,r as g,o as z,a as O,e as R,b as Z}from"./header-7c1f1e4e.js";import"./get-default-data-45312e9d.js";async function A(){try{const e=await T();screen.width<=767?k(e.results,g.weeklyLinks,1):k(e.results,g.weeklyLinks,3),g.weeklyLinks.addEventListener("click",z)}catch(e){console.error(e),O(g.weeklyLinks,R)}}localStorage.getItem("myLibrary")||localStorage.setItem("myLibrary",JSON.stringify([]));function F(e){const i=e.genres.map(t=>t.id);e.genre_ids=i}const G=new Date;G.getMonth();const j={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwYzcwNGY3NWVjYTA3MmEwNGFiODBiNzBjOTQ5ZWZjMiIsInN1YiI6IjY0Nzg0ZWFkY2Y0YjhiMDEwMzFjZWZjZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.HGp4SG4w1Ow4nxzAlMDbe5phup9IwpC6GqyzdUZE9ZM"}};fetch("https://api.themoviedb.org/3/genre/movie/list?language=en",j).then(e=>e.json()).then(e=>{const i={};e.genres.forEach(t=>{i[t.id]=t.name}),fetch("https://api.themoviedb.org/3/movie/upcoming?language=en-US&page=1",j).then(t=>t.json()).then(t=>{F(t);const l=t.results;if(l.length===0){const m=document.createElement("p");m.textContent="No upcoming films found.",document.getElementById("film-container").appendChild(m)}else{const m=G.getMonth()+1,s=[];if(l.forEach(c=>{new Date(c.release_date).getMonth()+1===m&&s.push(c)}),s.length>0){const c=Math.floor(Math.random()*s.length),n=s[c],a=document.createElement("div");a.className="film-card";const J=document.querySelector(".upcoming-film-image-container"),u=document.createElement("img");u.className="film-image",u.src=`https://image.tmdb.org/t/p/original/${n.backdrop_path}`,J.appendChild(u);const y=document.createElement("h2");y.className="film-title",y.textContent=n.title,a.appendChild(y);const d=document.createElement("div");d.className="film-release-wrap",a.appendChild(d);const C=document.createElement("p");C.className="film-release-text",C.textContent="Release Date",d.appendChild(C);const b=document.createElement("p");b.className="film-release-date",b.textContent=n.release_date,d.appendChild(b);const p=document.createElement("div");p.className="film-vote-wrap",a.appendChild(p);const E=document.createElement("p");E.className="film-vote-text",E.textContent="Vote / Votes",p.appendChild(E);const x=document.createElement("p");x.className="film-votes",x.textContent=`${n.vote_average} / ${n.vote_count}`,p.appendChild(x);const f=document.createElement("div");f.className="film-popularity-wrap",a.appendChild(f);const N=document.createElement("p");N.className="film-rating-text",N.textContent="Popularity",f.appendChild(N);const I=document.createElement("p");I.className="film-rating",I.textContent=`${n.popularity.toFixed(1)}`,f.appendChild(I);const h=document.createElement("div");h.className="film-genre-wrap",a.appendChild(h);const v=document.createElement("p");v.className="film-genre-text",v.textContent="Genre",h.appendChild(v);const L=document.createElement("p");L.className="film-genre";const W=n.genre_ids.map(D=>i[D]);L.textContent=`${W.join(", ")}`,h.appendChild(L);const w=document.createElement("p");w.className="film-about",w.textContent="ABOUT",a.appendChild(w);const M=document.createElement("p");M.className="film-description",M.textContent=n.overview,a.appendChild(M);const o=document.createElement("button");o.className="library-button button btn-gradient",S(n.id)?o.textContent="Remove from My Library":o.textContent="Add to My Library",o.addEventListener("click",()=>B(n,o)),a.appendChild(o),document.getElementById("film-container").appendChild(a)}else libraryButton.textContent="Add to My Library";libraryButton.addEventListener("click",()=>B(randomFilm,libraryButton)),filmCard.appendChild(libraryButton),document.getElementById("film-container").appendChild(filmCard)}const r=document.createElement("p");r.textContent="No upcoming films found for this month.",document.getElementById("film-container").appendChild(r)})});function S(e){return JSON.parse(localStorage.getItem("myLibrary")).some(t=>t.id===e)}function B(e,i){const t=JSON.parse(localStorage.getItem("myLibrary")),l=t.findIndex(r=>r.id===e.id);l===-1?t.push(e):t.splice(l,1),localStorage.setItem("myLibrary",JSON.stringify(t)),S(e.id)?i.textContent="Remove from My Library":i.textContent="Add to My Library"}Z("hero/catalog");A();
